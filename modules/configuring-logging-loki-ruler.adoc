// Module included in the following assemblies:
//
// * logging_alerts/custom-logging-alerts.adoc

:_mod-docs-content-type: PROCEDURE
[id="configuring-logging-loki-ruler_{context}"]
= Configuring the ruler

When the `LokiStack` ruler component is enabled, users can define a group of link:https://grafana.com/docs/loki/latest/query/[LogQL] (Grafana documentation) expressions that trigger logging alerts or recorded metrics.

Administrators can enable the ruler by modifying the `LokiStack` custom resource (CR).

.Prerequisites

* You have installed the {clo} and the {loki-op}.
* You have created a `LokiStack` CR.
* You have administrator permissions.

.Procedure

* Enable the ruler by ensuring that the `LokiStack` CR has the following spec configuration:
+
[source,yaml]
----
apiVersion: loki.grafana.com/v1
kind: LokiStack
metadata:
  name: <name>
  namespace: <namespace>
spec:
# ...
  rules:
    enabled: true #<1>
    selector: #<2>
      matchLabels:
        <label_name>: "true" #<3>
    namespaceSelector: #<4>
      matchLabels:
        <label_name>: "true" #<5>
----
<1> Enable Loki alerting and recording rules in your cluster.
<2> Specify the selector for the alerting and recording resources.
<3> Add a custom label that can be added to namespaces where you want to enable the use of logging alerts and metrics.
<4> Specify the namespaces in which the alerting and recording rules are defined for the {loki-op}. If undefined, only the rules defined in the same namespace as the `LokiStack` are used.
<5> Add a custom label that can be added to namespaces where you want to enable the use of logging alerts and metrics.
